pkgtype: exe+lib
summary: System and service manager
web-url: https://wiki.freedesktop.org/www/Software/systemd/
src-url: https://github.com/systemd/systemd/archive/refs/tags/v256.7.tar.gz
src-sha: 896d76ff65c88f5fd9e42f90d152b0579049158a163431dd77cdc57748b1d7b0
license: GPL-2.0-or-later LGPL-2.1-or-later
dep-pkg: libxcrypt libmount libzstd liblzma liblz4 libcap glib
dep-upp: gettext-tools intltool gm4 gperf rsync xsltproc docbook-xsl
dep-pym: jinja2-cli

install: |
    mesonw \
        --sysconfdir=$PACKAGE_INSTALL_DIR/etc \
        --localstatedir=$PACKAGE_INSTALL_DIR/var \
        -Drootprefix=$PACKAGE_INSTALL_DIR \
        -Dsysvinit-path=$PACKAGE_INSTALL_DIR/etc/init.d \
        -Dsysvrcnd-path=$PACKAGE_INSTALL_DIR/etc/rc.d \
        -Dpamconfdir=$PACKAGE_INSTALL_DIR/etc/pam.d \
        -Dbashcompletiondir=$PACKAGE_INSTALL_DIR/share/bash_completion \
        -Dstatic-libsystemd=pic \
        -Dman=enabled \
        -Dacl=disabled \
        -Dpam=disabled \
        -Dlz4=enabled \
        -Dhwdb=false \
        -Dtests=false \
        -Dp11kit=disabled \
        -Dgnutls=disabled \
        -Dlibcurl=disabled \
        -Dmicrohttpd=disabled \
        -Dcreate-log-dirs=false

dotweak: |
    printf 'Requires: libcap\n' >> lib/pkgconfig/libsystemd.pc
