summary: Distributed revision control system
webpage: https://git-scm.com
git-url: https://github.com/git/git.git
src-url: https://www.kernel.org/pub/software/scm/git/git-2.37.2.tar.xz
src-sha: 1c3d9c821c4538e7a6dac30a4af8bd8dcfe4f651f95474c526b52f83406db003
license: GPL-2.0-only
dep-pkg: gettext expat curl pcre2

bsystem: configure
binbstd: yes
install: |
    # musl libc
    if [ "$NATIVE_OS_LIBC" = musl ] ; then
        export ac_cv_c_regex_with_reg_startend=no
        export ac_cv_lib_curl_curl_global_init=yes
    fi

    OPENSSL_LIBS="$(pkg-config --libs openssl)"
    printf 'OPENSSL_LIBS=%s\n' "$OPENSSL_LIBS"

    case $NATIVE_OS_KIND in
        darwin) export LDFLAGS="$LDFLAGS -framework SystemConfiguration" ;;
        *)      export LDFLAGS="$LDFLAGS $OPENSSL_LIBS"
    esac

    configure \
        --with-zlib=$zlib_INSTALL_DIR \
        --with-curl=$curl_INSTALL_DIR \
        --with-expat=$expat_INSTALL_DIR \
        --with-iconv=$libiconv_INSTALL_DIR \
        --with-openssl=$openssl_INSTALL_DIR \
        --with-libpcre2=$pcre2_INSTALL_DIR \
        --without-tcltk
