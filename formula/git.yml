summary: Distributed revision control system
web-url: https://git-scm.com/
git-url: https://github.com/git/git
src-url: https://www.kernel.org/pub/software/scm/git/git-2.42.1.tar.xz
src-sha: 8e46fa96bf35a65625d85fde50391e39bc0620d1bb39afb70b96c4a237a1a4f7
license: GPL-2.0-only
dep-pkg: gettext expat libcurl libpcre2 zlib

bsystem: configure
binbstd: yes
install: |
    if [ "$NATIVE_OS_LIBC" = musl ] ; then
        export ac_cv_c_regex_with_reg_startend=no
    fi

    export ac_cv_lib_curl_curl_global_init=yes

    if [ -e ../lib/libcurl.a ] ; then
        rm  ../lib/libcurl.a
        printf 'INPUT(%s %s)\n' "$libcurl_LIBRARY_DIR/libcurl.a" "$(pkg-config --libs-only-l libcurl | sed 's|-lcurl||g')" > ../lib/libcurl.a
    fi

    configure \
        --with-zlib="$zlib_INSTALL_DIR" \
        --with-curl="$libcurl_INSTALL_DIR" \
        --with-expat="$expat_INSTALL_DIR" \
        --with-iconv="$libiconv_INSTALL_DIR" \
        --with-openssl="$openssl_INSTALL_DIR" \
        --with-libpcre2="$libpcre2_INSTALL_DIR" \
        --without-tcltk
