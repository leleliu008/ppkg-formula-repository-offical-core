summary: Core application library for C
webpage: https://developer.gnome.org/glib
git-url: https://github.com/GNOME/glib.git
src-url: https://download.gnome.org/sources/glib/2.72/glib-2.72.3.tar.xz
src-sha: 4a39a2f624b8512d500d5840173eda7fa85f51c109052eae806acece85d345f0
dep-pkg: gettext libffi pcre
license: LGPL-2.1-or-later

prepare: |
    sed_in_place "s|dependency('zlib', required : false)|cc.find_library('z', static : true, dirs : ['$zlib_LIBRARY_DIR'])|" meson.build

ldflags: -lintl
install: |
    mesonw \
        -Dnls=disabled \
        -Dman=false \
        -Dgtk_doc=false \
        -Diconv=external \
        -Ddtrace=false \
        -Dglib_debug=disabled \
        -Dglib_assert=false \
        -Dtests=false \
        -Dinstalled_tests=false \
        -Dbsymbolic_functions=false &&
    sed_in_place '/Libs: /s|$| -lintl|' "$PACKAGE_INSTALL_DIR/lib/pkgconfig/glib-2.0.pc"
