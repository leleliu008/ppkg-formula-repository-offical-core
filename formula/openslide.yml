summary: C library to read whole-slide images (a.k.a. virtual slides)
web-url: https://openslide.org/
git-url: https://github.com/openslide/openslide
src-url: https://github.com/openslide/openslide/releases/download/v3.4.1/openslide-3.4.1.tar.xz
src-sha: 9938034dba7f48fadc90a2cdf8cfe94c5613b04098d1348a5ff19da95b990564
license: LGPL-2.1-only
dep-pkg: cairo gdk-pixbuf openjpeg libsqlite3
dopatch: |
    if [ -e ../lib/libfreetype.a ] ; then
        rm  ../lib/libfreetype.a
        printf 'INPUT(%s %s)\n' "$freetype2_LIBRARY_DIR/libfreetype.a" "$(pkg-config --libs-only-l freetype2 | sed 's|-lfreetype||g')" > ../lib/libfreetype.a
    fi
    if [ -e ../lib/libglib-2.0.a ] ; then
        rm  ../lib/libglib-2.0.a
        printf 'INPUT(%s %s)\n' "$glib_LIBRARY_DIR/libglib-2.0.a" "$(pkg-config --libs-only-l glib-2.0 | sed 's|-lglib-2.0||g')" > ../lib/libglib-2.0.a
    fi
install: configure CPPFLAGS="'$CPPFLAGS -I$libxml2_INCLUDE_DIR/libxml2'"
