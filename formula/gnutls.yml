summary: GNU Transport Layer Security (TLS) Library
git-url: https://github.com/gnutls/gnutls
web-url: https://www.gnutls.org/
src-url: https://www.gnupg.org/ftp/gcrypt/gnutls/v3.8/gnutls-3.8.0.tar.xz
src-sha: 0ea0d11a1660a1e63f960f157b197abe6d0c8cb3255be24e1fb3815930b9bdc5
dep-pkg: gmp libunistring nettle libtasn1 libidn2 p11-kit
license: LGPL-2.1-or-later GPL-3.0-only

dopatch: |
    if [ -f ../lib/libunistring.a ] ; then
        if [ -f ../lib/libiconv.a ] ; then
            printf 'INPUT(%s %s)' "$libunistring_LIBRARY_DIR/libunistring.a" "$libiconv_LIBRARY_DIR/libiconv.a" > ../lib/libunistring.a
        fi
    fi
    if [ -f ../lib/libhogweed.a ] ; then
        if [ -f ../lib/libnettle.a ] ; then
            printf 'INPUT(%s %s)' "$nettle_LIBRARY_DIR/libhogweed.a" "$nettle_LIBRARY_DIR/libnettle.a" > ../lib/libhogweed.a
        fi
    fi

install: |
    configure \
        --without-gcov \
        --disable-tests \
        --disable-valgrind-tests \
        --disable-code-coverage \
        --disable-gtk-doc \
        --disable-guile \
        --enable-gcc-warnings
