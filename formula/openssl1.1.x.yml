summary: Cryptography and SSL/TLS Toolkit
webpage: https://www.openssl.org/
src-url: https://www.openssl.org/source/openssl-1.1.1q.tar.gz
src-sha: d7939ce614029cdff0b6c20f0e2e5703158a489a72b2507b8bd51bf8c8fd10ca
git-url: https://github.com/openssl/openssl.git
dep-pkg: perl
license: OpenSSL

bsystem: gmake
binbstd: yes
install: |
    case $NATIVE_OS_KIND in
        darwin) export LDFLAGS=$LDFLAGS -Wl,-z,muldefs
    esac

    export  CFLAGS="$(printf '%s\n'  "$CFLAGS" | sed -e 's|--static||g' -e 's|-static||g')"
    export LDFLAGS="$(printf '%s\n' "$LDFLAGS" | sed -e 's|--static||g' -e 's|-static||g')"

    run ./config \
        no-engine \
        no-ssl2 \
        no-ssl3 \
        no-comp \
        no-asm \
        no-hw \
        --prefix=$PACKAGE_INSTALL_DIR &&
    gmakew clean &&
    gmakew &&
    gmakew install
